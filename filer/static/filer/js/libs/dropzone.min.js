class Emitter{on(t,a){return this._callbacks=this._callbacks||{},this._callbacks[t]||(this._callbacks[t]=[]),this._callbacks[t].push(a),this}emit(t,...a){this._callbacks=this._callbacks||{};let l=this._callbacks[t];if(l)for(let s of l)s.apply(this,a);return this}off(t,a){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;let l=this._callbacks[t];if(!l)return this;if(1===arguments.length)return delete this._callbacks[t],this;for(let d,s=0;s<l.length;s++)if(d=l[s],d===a){l.splice(s,1);break}return this}}class Dropzone extends Emitter{static initClass(){this.prototype.Emitter=Emitter,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,timeout:3e4,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2e6,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:0.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init(){},params(t,a,l){if(l)return{dzuuid:l.file.upload.uuid,dzchunkindex:l.index,dztotalfilesize:l.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:l.file.upload.totalChunkCount,dzchunkbyteoffset:l.index*this.options.chunkSize}},accept(t,a){return a()},chunksUploaded:function(t,a){a()},fallback(){let t;this.element.className=`${this.element.className} dz-browser-not-supported`;for(let l of this.element.getElementsByTagName("div"))if(/(^| )dz-message($| )/.test(l.className)){t=l,l.className="dz-message";break}t||(t=Dropzone.createElement("<div class=\"dz-message\"><span></span></div>"),this.element.appendChild(t));let a=t.getElementsByTagName("span")[0];return a&&(null==a.textContent?null!=a.innerText&&(a.innerText=this.options.dictFallbackMessage):a.textContent=this.options.dictFallbackMessage),this.element.appendChild(this.getFallbackForm())},resize(t,a,l,s){let d={srcX:0,srcY:0,srcWidth:t.width,srcHeight:t.height},p=t.width/t.height;null==a&&null==l?(a=d.srcWidth,l=d.srcHeight):null==a?a=l*p:null==l&&(l=a/p),a=Math.min(a,d.srcWidth),l=Math.min(l,d.srcHeight);let u=a/l;if(d.srcWidth>a||d.srcHeight>l)if("crop"===s)p>u?(d.srcHeight=t.height,d.srcWidth=d.srcHeight*u):(d.srcWidth=t.width,d.srcHeight=d.srcWidth/u);else if("contain"===s)p>u?l=a/p:a=l*p;else throw new Error(`Unknown resizeMethod '${s}'`);return d.srcX=(t.width-d.srcWidth)/2,d.srcY=(t.height-d.srcHeight)/2,d.trgWidth=a,d.trgHeight=l,d},transformFile(t,a){return(this.options.resizeWidth||this.options.resizeHeight)&&t.type.match(/image.*/)?this.resizeImage(t,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,a):a(t)},previewTemplate:`\
<div class="dz-preview dz-file-preview">
  <div class="dz-image"><img data-dz-thumbnail /></div>
  <div class="dz-details">
    <div class="dz-size"><span data-dz-size></span></div>
    <div class="dz-filename"><span data-dz-name></span></div>
  </div>
  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>
  <div class="dz-error-message"><span data-dz-errormessage></span></div>
  <div class="dz-success-mark">
    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
      <title>Check</title>
      <defs></defs>
      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">
        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>
      </g>
    </svg>
  </div>
  <div class="dz-error-mark">
    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
      <title>Error</title>
      <defs></defs>
      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">
        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">
          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>
        </g>
      </g>
    </svg>
  </div>
</div>\
`,drop(){return this.element.classList.remove("dz-drag-hover")},dragstart(){},dragend(){return this.element.classList.remove("dz-drag-hover")},dragenter(){return this.element.classList.add("dz-drag-hover")},dragover(){return this.element.classList.add("dz-drag-hover")},dragleave(){return this.element.classList.remove("dz-drag-hover")},paste(){},reset(){return this.element.classList.remove("dz-started")},addedfile(t){if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){t.previewElement=Dropzone.createElement(this.options.previewTemplate.trim()),t.previewTemplate=t.previewElement,this.previewsContainer.appendChild(t.previewElement);for(var a of t.previewElement.querySelectorAll("[data-dz-name]"))a.textContent=t.name;for(a of t.previewElement.querySelectorAll("[data-dz-size]"))a.innerHTML=this.filesize(t.size);this.options.addRemoveLinks&&(t._removeLink=Dropzone.createElement(`<a class="dz-remove" href="javascript:undefined;" data-dz-remove>${this.options.dictRemoveFile}</a>`),t.previewElement.appendChild(t._removeLink));let l=s=>{return s.preventDefault(),s.stopPropagation(),t.status===Dropzone.UPLOADING?Dropzone.confirm(this.options.dictCancelUploadConfirmation,()=>this.removeFile(t)):this.options.dictRemoveFileConfirmation?Dropzone.confirm(this.options.dictRemoveFileConfirmation,()=>this.removeFile(t)):this.removeFile(t)};for(let s of t.previewElement.querySelectorAll("[data-dz-remove]"))s.addEventListener("click",l)}},removedfile(t){return null!=t.previewElement&&null!=t.previewElement.parentNode&&t.previewElement.parentNode.removeChild(t.previewElement),this._updateMaxFilesReachedClass()},thumbnail(t,a){if(t.previewElement){t.previewElement.classList.remove("dz-file-preview");for(let l of t.previewElement.querySelectorAll("[data-dz-thumbnail]"))l.alt=t.name,l.src=a;return setTimeout(()=>t.previewElement.classList.add("dz-image-preview"),1)}},error(t,a){if(t.previewElement){t.previewElement.classList.add("dz-error"),"String"!=typeof a&&a.error&&(a=a.error);for(let l of t.previewElement.querySelectorAll("[data-dz-errormessage]"))l.textContent=a}},errormultiple(){},processing(t){if(t.previewElement&&(t.previewElement.classList.add("dz-processing"),t._removeLink))return t._removeLink.innerHTML=this.options.dictCancelUpload},processingmultiple(){},uploadprogress(t,a){if(t.previewElement)for(let s of t.previewElement.querySelectorAll("[data-dz-uploadprogress]"))"PROGRESS"===s.nodeName?s.value=a:s.style.width=`${a}%`},totaluploadprogress(){},sending(){},sendingmultiple(){},success(t){if(t.previewElement)return t.previewElement.classList.add("dz-success")},successmultiple(){},canceled(t){return this.emit("error",t,this.options.dictUploadCanceled)},canceledmultiple(){},complete(t){if(t._removeLink&&(t._removeLink.innerHTML=this.options.dictRemoveFile),t.previewElement)return t.previewElement.classList.add("dz-complete")},completemultiple(){},maxfilesexceeded(){},maxfilesreached(){},queuecomplete(){},addedfiles(){}},this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}static extend(t,...a){for(let l of a)for(let s in l){let d=l[s];t[s]=d}return t}constructor(t,a){super();let l,s;if(this.element=t,this.version=Dropzone.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");Dropzone.instances.push(this),this.element.dropzone=this;let d=null==(s=Dropzone.optionsForElement(this.element))?{}:s;if(this.options=Dropzone.extend({},this.defaultOptions,d,null==a?{}:a),this.options.forceFallback||!Dropzone.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(this.options.uploadMultiple&&this.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),null!=this.options.renameFilename&&(this.options.renameFile=p=>this.options.renameFilename.call(this,p.name,p)),this.options.method=this.options.method.toUpperCase(),(l=this.getExistingFallback())&&l.parentNode&&l.parentNode.removeChild(l),!1!==this.options.previewsContainer&&(this.options.previewsContainer?this.previewsContainer=Dropzone.getElement(this.options.previewsContainer,"previewsContainer"):this.previewsContainer=this.element),this.options.clickable&&(!0===this.options.clickable?this.clickableElements=[this.element]:this.clickableElements=Dropzone.getElements(this.options.clickable,"clickable")),this.init()}getAcceptedFiles(){return this.files.filter(t=>t.accepted).map(t=>t)}getRejectedFiles(){return this.files.filter(t=>!t.accepted).map(t=>t)}getFilesWithStatus(t){return this.files.filter(a=>a.status===t).map(a=>a)}getQueuedFiles(){return this.getFilesWithStatus(Dropzone.QUEUED)}getUploadingFiles(){return this.getFilesWithStatus(Dropzone.UPLOADING)}getAddedFiles(){return this.getFilesWithStatus(Dropzone.ADDED)}getActiveFiles(){return this.files.filter(t=>t.status===Dropzone.UPLOADING||t.status===Dropzone.QUEUED).map(t=>t)}init(){if("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(Dropzone.createElement(`<div class="dz-default dz-message"><span>${this.options.dictDefaultMessage}</span></div>`)),this.clickableElements.length){let a=()=>{return this.hiddenFileInput&&this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=document.createElement("input"),this.hiddenFileInput.setAttribute("type","file"),(null===this.options.maxFiles||1<this.options.maxFiles)&&this.hiddenFileInput.setAttribute("multiple","multiple"),this.hiddenFileInput.className="dz-hidden-input",null!==this.options.acceptedFiles&&this.hiddenFileInput.setAttribute("accept",this.options.acceptedFiles),null!==this.options.capture&&this.hiddenFileInput.setAttribute("capture",this.options.capture),this.hiddenFileInput.style.visibility="hidden",this.hiddenFileInput.style.position="absolute",this.hiddenFileInput.style.top="0",this.hiddenFileInput.style.left="0",this.hiddenFileInput.style.height="0",this.hiddenFileInput.style.width="0",Dropzone.getElement(this.options.hiddenInputContainer,"hiddenInputContainer").appendChild(this.hiddenFileInput),this.hiddenFileInput.addEventListener("change",()=>{let{files:l}=this.hiddenFileInput;if(l.length)for(let s of l)this.addFile(s);return this.emit("addedfiles",l),a()})};a()}this.URL=null===window.URL?window.webkitURL:window.URL;for(let a of this.events)this.on(a,this.options[a]);this.on("uploadprogress",()=>this.updateTotalUploadProgress()),this.on("removedfile",()=>this.updateTotalUploadProgress()),this.on("canceled",a=>this.emit("complete",a)),this.on("complete",()=>{if(0===this.getAddedFiles().length&&0===this.getUploadingFiles().length&&0===this.getQueuedFiles().length)return setTimeout(()=>this.emit("queuecomplete"),0)});let t=function(a){return a.stopPropagation(),a.preventDefault?a.preventDefault():a.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:a=>{return this.emit("dragstart",a)},dragenter:a=>{return t(a),this.emit("dragenter",a)},dragover:a=>{let l;try{l=a.dataTransfer.effectAllowed}catch(s){}return a.dataTransfer.dropEffect="move"===l||"linkMove"===l?"move":"copy",t(a),this.emit("dragover",a)},dragleave:a=>{return this.emit("dragleave",a)},drop:a=>{return t(a),this.drop(a)},dragend:a=>{return this.emit("dragend",a)}}}],this.clickableElements.forEach(a=>{return this.listeners.push({element:a,events:{click:l=>{return(a!==this.element||l.target===this.element||Dropzone.elementInside(l.target,this.element.querySelector(".dz-message")))&&this.hiddenFileInput.click(),!0}}})}),this.enable(),this.options.init.call(this)}destroy(){return this.disable(),this.removeAllFiles(!0),(null==this.hiddenFileInput?void 0:this.hiddenFileInput.parentNode)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,Dropzone.instances.splice(Dropzone.instances.indexOf(this),1)}updateTotalUploadProgress(){let t,a=0,l=0,s=this.getActiveFiles();if(s.length){for(let d of this.getActiveFiles())a+=d.upload.bytesSent,l+=d.upload.total;t=100*a/l}else t=100;return this.emit("totaluploadprogress",t,l,a)}_getParamName(t){return"function"==typeof this.options.paramName?this.options.paramName(t):`${this.options.paramName}${this.options.uploadMultiple?`[${t}]`:""}`}_renameFile(t){return"function"==typeof this.options.renameFile?this.options.renameFile(t):t.name}getFallbackForm(){let t,a;if(t=this.getExistingFallback())return t;let l="<div class=\"dz-fallback\">";this.options.dictFallbackText&&(l+=`<p>${this.options.dictFallbackText}</p>`),l+=`<input type="file" name="${this._getParamName(0)}" ${this.options.uploadMultiple?"multiple=\"multiple\"":void 0} /><input type="submit" value="Upload!"></div>`;let s=Dropzone.createElement(l);return"FORM"===this.element.tagName?(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)):(a=Dropzone.createElement(`<form action="${this.options.url}" enctype="multipart/form-data" method="${this.options.method}"></form>`),a.appendChild(s)),null==a?s:a}getExistingFallback(){let t=function(l){for(let s of l)if(/(^| )fallback($| )/.test(s.className))return s};for(let l of["div","form"]){var a;if(a=t(this.element.getElementsByTagName(l)))return a}}setupEventListeners(){return this.listeners.map(t=>(()=>{let a=[];for(let l in t.events){let s=t.events[l];a.push(t.element.addEventListener(l,s,!1))}return a})())}removeEventListeners(){return this.listeners.map(t=>(()=>{let a=[];for(let l in t.events){let s=t.events[l];a.push(t.element.removeEventListener(l,s,!1))}return a})())}disable(){return this.clickableElements.forEach(t=>t.classList.remove("dz-clickable")),this.removeEventListeners(),this.disabled=!0,this.files.map(t=>this.cancelUpload(t))}enable(){return delete this.disabled,this.clickableElements.forEach(t=>t.classList.add("dz-clickable")),this.setupEventListeners()}filesize(t){let a=0,l="b";if(0<t){let s=["tb","gb","mb","kb","b"];for(let d=0;d<s.length;d++){let p=s[d],u=Math.pow(this.options.filesizeBase,4-d)/10;if(t>=u){a=t/Math.pow(this.options.filesizeBase,4-d),l=p;break}}a=Math.round(10*a)/10}return`<strong>${a}</strong> ${this.options.dictFileSizeUnits[l]}`}_updateMaxFilesReachedClass(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}drop(t){if(t.dataTransfer){this.emit("drop",t);let a=[];for(let l=0;l<t.dataTransfer.files.length;l++)a[l]=t.dataTransfer.files[l];if(this.emit("addedfiles",a),a.length){let{items:l}=t.dataTransfer;l&&l.length&&null!=l[0].webkitGetAsEntry?this._addFilesFromItems(l):this.handleFiles(a)}}}paste(t){if(null!=__guard__(null==t?void 0:t.clipboardData,l=>l.items)){this.emit("paste",t);let{items:a}=t.clipboardData;if(a.length)return this._addFilesFromItems(a)}}handleFiles(t){for(let a of t)this.addFile(a)}_addFilesFromItems(t){return(()=>{let a=[];for(let s of t){var l;null!=s.webkitGetAsEntry&&(l=s.webkitGetAsEntry())?l.isFile?a.push(this.addFile(s.getAsFile())):l.isDirectory?a.push(this._addFilesFromDirectory(l,l.name)):a.push(void 0):null==s.getAsFile?a.push(void 0):null==s.kind||"file"===s.kind?a.push(this.addFile(s.getAsFile())):a.push(void 0)}return a})()}_addFilesFromDirectory(t,a){let l=t.createReader(),s=p=>__guardMethod__(console,"log",u=>u.log(p));var d=()=>{return l.readEntries(p=>{if(0<p.length){for(let u of p)u.isFile?u.file(m=>{if(!(this.options.ignoreHiddenFiles&&"."===m.name.substring(0,1)))return m.fullPath=`${a}/${m.name}`,this.addFile(m)}):u.isDirectory&&this._addFilesFromDirectory(u,`${a}/${u.name}`);d()}return null},s)};return d()}accept(t,a){return this.options.maxFilesize&&t.size>1024*(1024*this.options.maxFilesize)?a(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(t.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):Dropzone.isValidFile(t,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(a(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",t)):this.options.accept.call(this,t,a):a(this.options.dictInvalidFileType)}addFile(t){return t.upload={uuid:Dropzone.uuidv4(),progress:0,total:t.size,bytesSent:0,filename:this._renameFile(t),chunked:this.options.chunking&&(this.options.forceChunking||t.size>this.options.chunkSize),totalChunkCount:Math.ceil(t.size/this.options.chunkSize)},this.files.push(t),t.status=Dropzone.ADDED,this.emit("addedfile",t),this._enqueueThumbnail(t),this.accept(t,a=>{return a?(t.accepted=!1,this._errorProcessing([t],a)):(t.accepted=!0,this.options.autoQueue&&this.enqueueFile(t)),this._updateMaxFilesReachedClass()})}enqueueFiles(t){for(let a of t)this.enqueueFile(a);return null}enqueueFile(t){if(t.status!==Dropzone.ADDED||!0!==t.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");else if(t.status=Dropzone.QUEUED,this.options.autoProcessQueue)return setTimeout(()=>this.processQueue(),0)}_enqueueThumbnail(t){if(this.options.createImageThumbnails&&t.type.match(/image.*/)&&t.size<=1024*(1024*this.options.maxThumbnailFilesize))return this._thumbnailQueue.push(t),setTimeout(()=>this._processThumbnailQueue(),0)}_processThumbnailQueue(){if(!(this._processingThumbnail||0===this._thumbnailQueue.length)){this._processingThumbnail=!0;let t=this._thumbnailQueue.shift();return this.createThumbnail(t,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,a=>{return this.emit("thumbnail",t,a),this._processingThumbnail=!1,this._processThumbnailQueue()})}}removeFile(t){if(t.status===Dropzone.UPLOADING&&this.cancelUpload(t),this.files=without(this.files,t),this.emit("removedfile",t),0===this.files.length)return this.emit("reset")}removeAllFiles(t){null==t&&(t=!1);for(let a of this.files.slice())(a.status!==Dropzone.UPLOADING||t)&&this.removeFile(a);return null}resizeImage(t,a,l,s,d){return this.createThumbnail(t,a,l,s,!0,(p,u)=>{if(null==u)return d(t);let{resizeMimeType:m}=this.options;null==m&&(m=t.type);let h=u.toDataURL(m,this.options.resizeQuality);return("image/jpeg"===m||"image/jpg"===m)&&(h=ExifRestore.restore(t.dataURL,h)),d(Dropzone.dataURItoBlob(h))})}createThumbnail(t,a,l,s,d,p){let u=new FileReader;return u.onload=()=>{return t.dataURL=u.result,"image/svg+xml"===t.type?void(null!=p&&p(u.result)):this.createThumbnailFromUrl(t,a,l,s,d,p)},u.readAsDataURL(t)}createThumbnailFromUrl(t,a,l,s,d,p,u){let m=document.createElement("img");return u&&(m.crossOrigin=u),m.onload=()=>{let h=f=>f(1);return"undefined"!=typeof EXIF&&null!==EXIF&&d&&(h=f=>EXIF.getData(m,function(){return f(EXIF.getTag(this,"Orientation"))})),h(f=>{t.width=m.width,t.height=m.height;let g=this.options.resize.call(this,t,a,l,s),F=document.createElement("canvas"),b=F.getContext("2d");F.width=g.trgWidth,F.height=g.trgHeight,4<f&&(F.width=g.trgHeight,F.height=g.trgWidth),2===f?(b.translate(F.width,0),b.scale(-1,1)):3===f?(b.translate(F.width,F.height),b.rotate(Math.PI)):4===f?(b.translate(0,F.height),b.scale(1,-1)):5===f?(b.rotate(0.5*Math.PI),b.scale(1,-1)):6===f?(b.rotate(0.5*Math.PI),b.translate(0,-F.width)):7===f?(b.rotate(0.5*Math.PI),b.translate(F.height,-F.width),b.scale(-1,1)):8===f?(b.rotate(-0.5*Math.PI),b.translate(-F.height,0)):void 0,drawImageIOSFix(b,m,null==g.srcX?0:g.srcX,null==g.srcY?0:g.srcY,g.srcWidth,g.srcHeight,null==g.trgX?0:g.trgX,null==g.trgY?0:g.trgY,g.trgWidth,g.trgHeight);let E=F.toDataURL("image/png");if(null!=p)return p(E,F)})},null!=p&&(m.onerror=p),m.src=t.dataURL}processQueue(){let{parallelUploads:t}=this.options,a=this.getUploadingFiles().length,l=a;if(!(a>=t)){let s=this.getQueuedFiles();if(0<s.length){if(this.options.uploadMultiple)return this.processFiles(s.slice(0,t-a));for(;l<t;){if(!s.length)return;this.processFile(s.shift()),l++}}}}processFile(t){return this.processFiles([t])}processFiles(t){for(let a of t)a.processing=!0,a.status=Dropzone.UPLOADING,this.emit("processing",a);return this.options.uploadMultiple&&this.emit("processingmultiple",t),this.uploadFiles(t)}_getFilesWithXhr(t){let a;return a=this.files.filter(l=>l.xhr===t).map(l=>l)}cancelUpload(t){if(t.status===Dropzone.UPLOADING){let a=this._getFilesWithXhr(t.xhr);for(let l of a)l.status=Dropzone.CANCELED;"undefined"!=typeof t.xhr&&t.xhr.abort();for(let l of a)this.emit("canceled",l);this.options.uploadMultiple&&this.emit("canceledmultiple",a)}else(t.status===Dropzone.ADDED||t.status===Dropzone.QUEUED)&&(t.status=Dropzone.CANCELED,this.emit("canceled",t),this.options.uploadMultiple&&this.emit("canceledmultiple",[t]));return this.options.autoProcessQueue?this.processQueue():void 0}resolveOption(t,...a){return"function"==typeof t?t.apply(this,a):t}uploadFile(t){return this.uploadFiles([t])}uploadFiles(t){this._transformFiles(t,a=>{if(t[0].upload.chunked){let l=t[0],s=a[0],d=0;l.upload.chunks=[];let p=()=>{let u=0;for(;void 0!==l.upload.chunks[u];)u++;if(!(u>=l.upload.totalChunkCount)){d++;let m=u*this.options.chunkSize,h=Math.min(m+this.options.chunkSize,l.size),f={name:this._getParamName(0),data:s.webkitSlice?s.webkitSlice(m,h):s.slice(m,h),filename:l.upload.filename,chunkIndex:u};l.upload.chunks[u]={file:l,index:u,dataBlock:f,status:Dropzone.UPLOADING,progress:0,retries:0},this._uploadData(t,[f])}};if(l.upload.finishedChunkUpload=u=>{let m=!0;u.status=Dropzone.SUCCESS,u.dataBlock=null,u.xhr=null;for(let h=0;h<l.upload.totalChunkCount;h++){if(void 0===l.upload.chunks[h])return p();l.upload.chunks[h].status!==Dropzone.SUCCESS&&(m=!1)}m&&this.options.chunksUploaded(l,()=>{this._finished(t,"",null)})},this.options.parallelChunkUploads)for(let u=0;u<l.upload.totalChunkCount;u++)p();else p()}else{let l=[];for(let s=0;s<t.length;s++)l[s]={name:this._getParamName(s),data:a[s],filename:t[s].upload.filename};this._uploadData(t,l)}})}_getChunk(t,a){for(let l=0;l<t.upload.totalChunkCount;l++)if(t.upload.chunks[l]!==void 0&&t.upload.chunks[l].xhr===a)return t.upload.chunks[l]}_uploadData(t,a){let l=new XMLHttpRequest;for(let h of t)h.xhr=l;t[0].upload.chunked&&(t[0].upload.chunks[a[0].chunkIndex].xhr=l);let s=this.resolveOption(this.options.method,t),d=this.resolveOption(this.options.url,t);l.open(s,d,!0),l.timeout=this.resolveOption(this.options.timeout,t),l.withCredentials=!!this.options.withCredentials,l.onload=h=>{this._finishedUploading(t,l,h)},l.onerror=()=>{this._handleUploadError(t,l)};let p=null==l.upload?l:l.upload;p.onprogress=h=>this._updateFilesUploadProgress(t,l,h);let u={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};for(let h in this.options.headers&&Dropzone.extend(u,this.options.headers),u){let f=u[h];f&&l.setRequestHeader(h,f)}let m=new FormData;if(this.options.params){let h=this.options.params;for(let f in"function"==typeof h&&(h=h.call(this,t,l,t[0].upload.chunked?this._getChunk(t[0],l):null)),h){let g=h[f];m.append(f,g)}}for(let h of t)this.emit("sending",h,l,m);this.options.uploadMultiple&&this.emit("sendingmultiple",t,l,m),this._addFormElementData(m);for(let f,h=0;h<a.length;h++)f=a[h],m.append(f.name,f.data,f.filename);this.submitRequest(l,m,t)}_transformFiles(t,a){let l=[],s=0;for(let d=0;d<t.length;d++)this.options.transformFile.call(this,t[d],p=>{l[d]=p,++s===t.length&&a(l)})}_addFormElementData(t){if("FORM"===this.element.tagName)for(let a of this.element.querySelectorAll("input, textarea, select, button")){let l=a.getAttribute("name"),s=a.getAttribute("type");if(s&&(s=s.toLowerCase()),"undefined"!=typeof l&&null!==l)if("SELECT"===a.tagName&&a.hasAttribute("multiple"))for(let g of a.options)g.selected&&t.append(l,g.value);else(!s||"checkbox"!==s&&"radio"!==s||a.checked)&&t.append(l,a.value)}}_updateFilesUploadProgress(t,a,l){let s;if("undefined"!=typeof l){if(s=100*l.loaded/l.total,t[0].upload.chunked){let d=t[0],p=this._getChunk(d,a);p.progress=s,p.total=l.total,p.bytesSent=l.loaded;d.upload.progress=0,d.upload.total=0,d.upload.bytesSent=0;for(let f=0;f<d.upload.totalChunkCount;f++)void 0!==d.upload.chunks[f]&&void 0!==d.upload.chunks[f].progress&&(d.upload.progress+=d.upload.chunks[f].progress,d.upload.total+=d.upload.chunks[f].total,d.upload.bytesSent+=d.upload.chunks[f].bytesSent);d.upload.progress/=d.upload.totalChunkCount}else for(let d of t)d.upload.progress=s,d.upload.total=l.total,d.upload.bytesSent=l.loaded;for(let d of t)this.emit("uploadprogress",d,d.upload.progress,d.upload.bytesSent)}else{let d=!0;s=100;for(let p of t)(100!==p.upload.progress||p.upload.bytesSent!==p.upload.total)&&(d=!1),p.upload.progress=s,p.upload.bytesSent=p.upload.total;if(d)return;for(let p of t)this.emit("uploadprogress",p,s,p.upload.bytesSent)}}_finishedUploading(t,a,l){let s;if(t[0].status!==Dropzone.CANCELED&&4===a.readyState){if("arraybuffer"!==a.responseType&&"blob"!==a.responseType&&(s=a.responseText,a.getResponseHeader("content-type")&&~a.getResponseHeader("content-type").indexOf("application/json")))try{s=JSON.parse(s)}catch(d){l=d,s="Invalid JSON response from server."}this._updateFilesUploadProgress(t),200<=a.status&&300>a.status?t[0].upload.chunked?t[0].upload.finishedChunkUpload(this._getChunk(t[0],a)):this._finished(t,s,l):this._handleUploadError(t,a,s)}}_handleUploadError(t,a,l){if(t[0].status!==Dropzone.CANCELED){if(t[0].upload.chunked&&this.options.retryChunks){let s=this._getChunk(t[0],a);if(s.retries++<this.options.retryChunksLimit)return void this._uploadData(t,[s.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}for(let s of t)this._errorProcessing(t,l||this.options.dictResponseError.replace("{{statusCode}}",a.status),a)}}submitRequest(t,a){t.send(a)}_finished(t,a,l){for(let s of t)s.status=Dropzone.SUCCESS,this.emit("success",s,a,l),this.emit("complete",s);if(this.options.uploadMultiple&&(this.emit("successmultiple",t,a,l),this.emit("completemultiple",t)),this.options.autoProcessQueue)return this.processQueue()}_errorProcessing(t,a,l){for(let s of t)s.status=Dropzone.ERROR,this.emit("error",s,a,l),this.emit("complete",s);if(this.options.uploadMultiple&&(this.emit("errormultiple",t,a,l),this.emit("completemultiple",t)),this.options.autoProcessQueue)return this.processQueue()}static uuidv4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){let a=0|16*Math.random(),l="x"===t?a:8|3&a;return l.toString(16)})}}Dropzone.initClass(),Dropzone.version="5.5.0",Dropzone.options={},Dropzone.optionsForElement=function(t){return t.getAttribute("id")?Dropzone.options[camelize(t.getAttribute("id"))]:void 0},Dropzone.instances=[],Dropzone.forElement=function(t){if("string"==typeof t&&(t=document.querySelector(t)),null==(null==t?void 0:t.dropzone))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return t.dropzone},Dropzone.autoDiscover=!0,Dropzone.discover=function(){let t;if(document.querySelectorAll)t=document.querySelectorAll(".dropzone");else{t=[];let a=l=>(()=>{let s=[];for(let d of l)/(^| )dropzone($| )/.test(d.className)?s.push(t.push(d)):s.push(void 0);return s})();a(document.getElementsByTagName("div")),a(document.getElementsByTagName("form"))}return(()=>{let a=[];for(let l of t)!1===Dropzone.optionsForElement(l)?a.push(void 0):a.push(new Dropzone(l));return a})()},Dropzone.blacklistedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],Dropzone.isBrowserSupported=function(){let t=!0;if(!(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector))t=!1;else if(!("classList"in document.createElement("a")))t=!1;else for(let a of Dropzone.blacklistedBrowsers)if(a.test(navigator.userAgent)){t=!1;continue}return t},Dropzone.dataURItoBlob=function(t){let a=atob(t.split(",")[1]),l=t.split(",")[0].split(":")[1].split(";")[0],s=new ArrayBuffer(a.length),d=new Uint8Array(s);for(let p=0,u=a.length,m=0<=u;m?p<=u:p>=u;m?p++:p--)d[p]=a.charCodeAt(p);return new Blob([s],{type:l})};const without=(t,a)=>t.filter(l=>l!==a).map(l=>l),camelize=t=>t.replace(/[\-_](\w)/g,a=>a.charAt(1).toUpperCase());Dropzone.createElement=function(t){let a=document.createElement("div");return a.innerHTML=t,a.childNodes[0]},Dropzone.elementInside=function(t,a){if(t===a)return!0;for(;t=t.parentNode;)if(t===a)return!0;return!1},Dropzone.getElement=function(t,a){let l;if("string"==typeof t?l=document.querySelector(t):null!=t.nodeType&&(l=t),null==l)throw new Error(`Invalid \`${a}\` option provided. Please provide a CSS selector or a plain HTML element.`);return l},Dropzone.getElements=function(t,a){let l,s;if(t instanceof Array){s=[];try{for(l of t)s.push(this.getElement(l,a))}catch(d){s=null}}else if("string"==typeof t){s=[];for(l of document.querySelectorAll(t))s.push(l)}else null!=t.nodeType&&(s=[t]);if(null==s||!s.length)throw new Error(`Invalid \`${a}\` option provided. Please provide a CSS selector, a plain HTML element or a list of those.`);return s},Dropzone.confirm=function(t,a,l){if(window.confirm(t))return a();return null==l?void 0:l()},Dropzone.isValidFile=function(t,a){if(!a)return!0;a=a.split(",");let l=t.type,s=l.replace(/\/.*$/,"");for(let d of a)if(d=d.trim(),"."===d.charAt(0)){if(-1!==t.name.toLowerCase().indexOf(d.toLowerCase(),t.name.length-d.length))return!0;}else if(/\/\*$/.test(d)){if(s===d.replace(/\/.*$/,""))return!0;}else if(l===d)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(t){return this.each(function(){return new Dropzone(this,t)})}),"undefined"!=typeof module&&null!==module?module.exports=Dropzone:window.Dropzone=Dropzone,Dropzone.ADDED="added",Dropzone.QUEUED="queued",Dropzone.ACCEPTED=Dropzone.QUEUED,Dropzone.UPLOADING="uploading",Dropzone.PROCESSING=Dropzone.UPLOADING,Dropzone.CANCELED="canceled",Dropzone.ERROR="error",Dropzone.SUCCESS="success";let detectVerticalSquash=function(t){let a=t.naturalWidth,l=t.naturalHeight,s=document.createElement("canvas");s.width=1,s.height=l;let d=s.getContext("2d");d.drawImage(t,0,0);let{data:p}=d.getImageData(1,0,1,l),u=0,m=l,h=l;for(;h>u;){let g=p[4*(h-1)+3];0===g?m=h:u=h,h=m+u>>1}let f=h/l;return 0==f?1:f};var drawImageIOSFix=function(t,a,l,s,d,p,u,m,h,f){let g=detectVerticalSquash(a);return t.drawImage(a,l,s,d,p,u,m,h,f/g)};class ExifRestore{static initClass(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}static encode64(t){let a="",l,s,d="",p,u,m,h="",f=0;for(;l=t[f++],s=t[f++],d=t[f++],p=l>>2,u=(3&l)<<4|s>>4,m=(15&s)<<2|d>>6,h=63&d,isNaN(s)?m=h=64:isNaN(d)&&(h=64),a=a+this.KEY_STR.charAt(p)+this.KEY_STR.charAt(u)+this.KEY_STR.charAt(m)+this.KEY_STR.charAt(h),l=s=d="",p=u=m=h="",!!(f<t.length););return a}static restore(t,a){if(!t.match("data:image/jpeg;base64,"))return a;let l=this.decode64(t.replace("data:image/jpeg;base64,","")),s=this.slice2Segments(l),d=this.exifManipulation(a,s);return`data:image/jpeg;base64,${this.encode64(d)}`}static exifManipulation(t,a){let l=this.getExifArray(a),s=this.insertExif(t,l),d=new Uint8Array(s);return d}static getExifArray(t){for(let a,l=0;l<t.length;){if(a=t[l],255===a[0]&225===a[1])return a;l++}return[]}static insertExif(t,a){let l=t.replace("data:image/jpeg;base64,",""),s=this.decode64(l),d=s.indexOf(255,3),p=s.slice(0,d),u=s.slice(d),m=p;return m=m.concat(a),m=m.concat(u),m}static slice2Segments(t){let a=0,l=[];for(;;){var s;if(255===t[a]&218===t[a+1])break;if(255===t[a]&216===t[a+1])a+=2;else{s=256*t[a+2]+t[a+3];let d=a+s+2,p=t.slice(a,d);l.push(p),a=d}if(a>t.length)break}return l}static decode64(t){let l,s,d="",p,u,m,h="",f=0,g=[],F=/[^A-Za-z0-9\+\/\=]/g;for(F.exec(t)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");p=this.KEY_STR.indexOf(t.charAt(f++)),u=this.KEY_STR.indexOf(t.charAt(f++)),m=this.KEY_STR.indexOf(t.charAt(f++)),h=this.KEY_STR.indexOf(t.charAt(f++)),l=p<<2|u>>4,s=(15&u)<<4|m>>2,d=(3&m)<<6|h,g.push(l),64!==m&&g.push(s),64!==h&&g.push(d),l=s=d="",p=u=m=h="",!!(f<t.length););return g}}ExifRestore.initClass();let contentLoaded=function(t,a){let l=!1,s=!0,d=t.document,p=d.documentElement,u=d.addEventListener?"addEventListener":"attachEvent",m=d.addEventListener?"removeEventListener":"detachEvent",h=d.addEventListener?"":"on";var f=function(F){if(("readystatechange"!==F.type||"complete"===d.readyState)&&(("load"===F.type?t:d)[m](h+F.type,f,!1),!l&&(l=!0)))return a.call(t,F.type||F)},g=function(){try{p.doScroll("left")}catch(F){return void setTimeout(g,50)}return f("poll")};if("complete"!==d.readyState){if(d.createEventObject&&p.doScroll){try{s=!t.frameElement}catch(F){}s&&g()}return d[u](h+"DOMContentLoaded",f,!1),d[u](h+"readystatechange",f,!1),t[u](h+"load",f,!1)}};Dropzone._autoDiscoverFunction=function(){if(Dropzone.autoDiscover)return Dropzone.discover()},contentLoaded(window,Dropzone._autoDiscoverFunction);function __guard__(t,a){return"undefined"!=typeof t&&null!==t?a(t):void 0}function __guardMethod__(t,a,l){return"undefined"!=typeof t&&null!==t&&"function"==typeof t[a]?l(t,a):void 0}